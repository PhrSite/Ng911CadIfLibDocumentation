{
  "api/index.html": {
    "href": "api/index.html",
    "title": "The NG911CadIfLib Class Library",
    "keywords": "The NG911CadIfLib Class Library The NG911CadIfLib class library consists of a single namespace called Ng911CadIfLib. The PSAP CHFE primarily interacts with a single class called Ng911CadIfServer . See Using the NG911CadIfLib Class Library ."
  },
  "api/Ng911CadIfLib.CadIfLoggingSettings.html": {
    "href": "api/Ng911CadIfLib.CadIfLoggingSettings.html",
    "title": "Class CadIfLoggingSettings",
    "keywords": "Class CadIfLoggingSettings Class for specifying the settings for NG9-1-1 event logging for the Ng911CadIfServer class. Inheritance System.Object CadIfLoggingSettings Inherited Members System.Object.Equals(System.Object) System.Object.Equals(System.Object, System.Object) System.Object.GetHashCode() System.Object.GetType() System.Object.MemberwiseClone() System.Object.ReferenceEquals(System.Object, System.Object) System.Object.ToString() Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public class CadIfLoggingSettings Properties AgencyAgentId Agent identifier of the agent within the Agency. Optional Declaration public string AgencyAgentId { get; set; } Property Value Type Description System.String AgencyId AgencyId (Section 2.1.1 of NENA-STA-010.3) of the agency that logged the event. Required. Declaration public string AgencyId { get; set; } Property Value Type Description System.String AgencyPositionId Identifier of the operator position that is handling the call. Optional Declaration public string AgencyPositionId { get; set; } Property Value Type Description System.String ElementId Element identifier (Section 2.1.3 of NENA-STA-010.3) of the element that logged the event. Required. Declaration public string ElementId { get; set; } Property Value Type Description System.String"
  },
  "api/Ng911CadIfLib.EidoRequestReceivedDelegate.html": {
    "href": "api/Ng911CadIfLib.EidoRequestReceivedDelegate.html",
    "title": "Delegate EidoRequestReceivedDelegate",
    "keywords": "Delegate EidoRequestReceivedDelegate Delegate for the EidoRequestReceived event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void EidoRequestReceivedDelegate(IPEndPoint RemIpe, string RequestPath, X509Certificate2 ClientCertificate); Parameters Type Name Description System.Net.IPEndPoint RemIpe Endpoint of the client System.String RequestPath Path from the HTTPS GET request System.Security.Cryptography.X509Certificates.X509Certificate2 ClientCertificate The client’s X.509 certificate. May be null if the client did not provide a certificate."
  },
  "api/Ng911CadIfLib.EidoResponseSentDelegate.html": {
    "href": "api/Ng911CadIfLib.EidoResponseSentDelegate.html",
    "title": "Delegate EidoResponseSentDelegate",
    "keywords": "Delegate EidoResponseSentDelegate Delegate for the EidoResponseSent event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void EidoResponseSentDelegate(IPEndPoint RemIpe, int ResponseCode, EidoType eido); Parameters Type Name Description System.Net.IPEndPoint RemIpe Endpoint of the client. System.Int32 ResponseCode HTTP response code that was sent. Eido.EidoType eido EIDO document that was sent. Will be null if the ResponseCode is not 200."
  },
  "api/Ng911CadIfLib.EidoRetrievalCallbackDelegate.html": {
    "href": "api/Ng911CadIfLib.EidoRetrievalCallbackDelegate.html",
    "title": "Delegate EidoRetrievalCallbackDelegate",
    "keywords": "Delegate EidoRetrievalCallbackDelegate Callback delegate that the Ng911CadIfServer class uses to retrieve an EIDO from the PSAP CHFE for the EIDO Retrieval Service. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate EidoType EidoRetrievalCallbackDelegate(string EidoReferenceId, X509Certificate2 ClientCert, IPEndPoint RemIpe, out int ResponseCode); Parameters Type Name Description System.String EidoReferenceId Requested EIDO reference ID. This is the last element of the request path. System.Security.Cryptography.X509Certificates.X509Certificate2 ClientCert X.509 certificate of the client. Will be null if the client did not provide a certificate. If not null, the application can use the information in this object to determine whether or not to provide the requested EIDO to the client. System.Net.IPEndPoint RemIpe IP endpoint that contains the IP address and port number of the remote client that is requesting the EIDO for a specific interface via an HTTPS GET request. System.Int32 ResponseCode Response code. This is an output parameter that the application provides. If the application returns an EidoType object, then the response code shall be 200 (OK). Otherwise, the response code should be set a value that indicates the error condition (for example 404 for not found). Returns Type Description Eido.EidoType An EidoType object if the requested EIDO was found or null if not found or if the client is not allowed access the EIDO."
  },
  "api/Ng911CadIfLib.html": {
    "href": "api/Ng911CadIfLib.html",
    "title": "Namespace Ng911CadIfLib",
    "keywords": "Namespace Ng911CadIfLib Classes CadIfLoggingSettings Class for specifying the settings for NG9-1-1 event logging for the Ng911CadIfServer class. Ng911CadIfServer Class that provides a EIDO conveyance interface between the PSAP CHFE and one or more CAD systems. See NENA-STA-024.1a-2023. Delegates EidoRequestReceivedDelegate Delegate for the EidoRequestReceived event of the Ng911CadIfServer class. EidoResponseSentDelegate Delegate for the EidoResponseSent event of the Ng911CadIfServer class. EidoRetrievalCallbackDelegate Callback delegate that the Ng911CadIfServer class uses to retrieve an EIDO from the PSAP CHFE for the EIDO Retrieval Service. MutualAuthenticationDelegate Callback delegate that the application using the Ng911CadIfServer class can use to perform custom authentication and/or extended authorization. NewSubscriptionDelegate Delegate for the NewSubscription event of the Ng911CadIfServer class. SubscriptionEndedDelegate Delegate for the SubscriptionEnded event of the Ng911CadIfServer class. WssConectionEndedDelegate Delegate for the WssConnectionEnded event of the Ng911CadIfServer class. WssConnectionAcceptedDelegate Delegate for the WssConnectionAccepted event of the Ng911CadIfServer class. WssMessageReceivedDelegate Delegate for the WssMessageReceived event of the Ng911CadIfServer class. WssMessageSentDelegate Delegate for the WssMessageSent event of the Ng911CadIfServer class."
  },
  "api/Ng911CadIfLib.MutualAuthenticationDelegate.html": {
    "href": "api/Ng911CadIfLib.MutualAuthenticationDelegate.html",
    "title": "Delegate MutualAuthenticationDelegate",
    "keywords": "Delegate MutualAuthenticationDelegate Callback delegate that the application using the Ng911CadIfServer class can use to perform custom authentication and/or extended authorization. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate bool MutualAuthenticationDelegate(X509Certificate2 certificate, X509Chain chain, SslPolicyErrors errors); Parameters Type Name Description System.Security.Cryptography.X509Certificates.X509Certificate2 certificate Client certificate provided with the WebSocket connection request. May be null if no client certificate was provided. System.Security.Cryptography.X509Certificates.X509Chain chain Contains the chain of certificate authorities associated with the remote certificate. System.Net.Security.SslPolicyErrors errors One or more errors associated with the remote certificate. Returns Type Description System.Boolean Return true to allow the connection request or false to deny it."
  },
  "api/Ng911CadIfLib.NewSubscriptionDelegate.html": {
    "href": "api/Ng911CadIfLib.NewSubscriptionDelegate.html",
    "title": "Delegate NewSubscriptionDelegate",
    "keywords": "Delegate NewSubscriptionDelegate Delegate for the NewSubscription event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void NewSubscriptionDelegate(string strSubscriptionId, string strIdType, string strId, IPEndPoint RemIpe); Parameters Type Name Description System.String strSubscriptionId Subscription ID of the new subscription. System.String strIdType Identifies the type of functional element that subscribed to receive EIDO notification events. This information is from the idType field of the other name field of the SubjectAltName of the client X.509 certificate that was issued by the PSAP Credentialing Agency (PSAP). Will be null if the subscriber did not provide a client certificate. System.String strId ID of the subscriber from the X.509 certificate. Will be null if the subscriber did not provide a client certificate System.Net.IPEndPoint RemIpe IP endpoint of the subscriber. The IPEndpoint contains the IP address and port number of the subscriber."
  },
  "api/Ng911CadIfLib.Ng911CadIfServer.html": {
    "href": "api/Ng911CadIfLib.Ng911CadIfServer.html",
    "title": "Class Ng911CadIfServer",
    "keywords": "Class Ng911CadIfServer Class that provides a EIDO conveyance interface between the PSAP CHFE and one or more CAD systems. See NENA-STA-024.1a-2023. Inheritance System.Object Ng911CadIfServer Inherited Members System.Object.Equals(System.Object) System.Object.Equals(System.Object, System.Object) System.Object.GetHashCode() System.Object.GetType() System.Object.MemberwiseClone() System.Object.ReferenceEquals(System.Object, System.Object) System.Object.ToString() Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public class Ng911CadIfServer Constructors Ng911CadIfServer(X509Certificate2, IPEndPoint, String, String, I3LogEventClientMgr, CadIfLoggingSettings, MutualAuthenticationDelegate, EidoRetrievalCallbackDelegate) Constructor Declaration public Ng911CadIfServer(X509Certificate2 ServerCert, IPEndPoint ServerEndPoint, string WsPath, string HttpsEidoPath, I3LogEventClientMgr LoggingInterface, CadIfLoggingSettings LoggingSettings, MutualAuthenticationDelegate MutualAuthCallback, EidoRetrievalCallbackDelegate RetrievalCallback) Parameters Type Name Description System.Security.Cryptography.X509Certificates.X509Certificate2 ServerCert X.509 certificate to use for the HTTPS/WSS web socket listener. The certificate must contain a private key. Required System.Net.IPEndPoint ServerEndPoint Specifies the IP address and port number that the Ng911CadIfServer will listen on. The IP address may be IPAddress.Any, IPAddress.IPv6Any, an IPv4 address or an IPv6 address. Required. System.String WsPath Specifies the path that clients will use to connect to the Ng911CadIfServer's Web Socket server. Required. For example: /IncidentData/Ent System.String HttpsEidoPath Specifies the path that clients will use to access the EIDO Retrieval service. Required.For example: /incidents/eidos. I3V3.LoggingHelpers.I3LogEventClientMgr LoggingInterface Specifies the I3LogEventClientMgr object to use for sending NG9-1-1 log events. If this parameter is null then the Ng911CadIfServer object will not send NG9-1-1 log events. If non-null, then the I3LogEventClientMgr object must be configured and running. CadIfLoggingSettings LoggingSettings Configuration settings for logging I3V3 NG9-1-1 log events. This parameter is required if the LoggingInterface parameter is not null. MutualAuthenticationDelegate MutualAuthCallback Callback delegate that allows the caller to perform custom authentication of the WebSocket client. EidoRetrievalCallbackDelegate RetrievalCallback Specifies a callback for a function that the Ng911CadIfServer object will call to retrieve an EIDO from the application (PSAP CHFE) when a functional element (i.e. another PSAP system) attempts to retrieve an EIDO using the EIDO Retrieval Service interface of the Ng911CadIfServer object. Methods SendEido(EidoType) Sends a single EIDO document to all subscribers. This method queues the EIDO for transmission and returns immediately. This method should be called when a new EIDO is created or an existing EIDO is updated. Declaration public void SendEido(EidoType Eido) Parameters Type Name Description Eido.EidoType Eido EIDO to send SendEidosToSubscriber(String, List<EidoType>) Sends a list of all EIDOs for active incidents to send to a specific subscriber. This method queues the EIDOs and returns immediately. Declaration public void SendEidosToSubscriber(string strSubscriptionId, List<EidoType> Eidos) Parameters Type Name Description System.String strSubscriptionId Subscription ID of the subscriber. List < Eido.EidoType > Eidos List of EIDOs to send. Shutdown() Performs a graceful shutdown by terminating all subscriptions and stopping the Web Socket listener. Declaration public void Shutdown() Start() Causes the Ng911CadIfServer object to start its HTTPS server listening for Web Socket requests and HTTPS EIDO Retrieval Service requests. Declaration public void Start() Events EidoRequestReceived The Ng911CadIfServer class fires this event when it receives an HTTPS GET request for an EIDO. This event is for testing only. The application is not expected to handle this event. Declaration public event EidoRequestReceivedDelegate EidoRequestReceived Event Type Type Description EidoRequestReceivedDelegate EidoResponseSent The Ng911CadIfServer class fires this event when it sends a response to an HTTPS GET request for an EIDO. This event is for testing only. The application is not expected to handle this event. Declaration public event EidoResponseSentDelegate EidoResponseSent Event Type Type Description EidoResponseSentDelegate NewSubscription Fired when a new subscription request is accepted. Declaration public event NewSubscriptionDelegate NewSubscription Event Type Type Description NewSubscriptionDelegate SubscriptionEnded Fired when a subscription expires, the subscriber unsubscribes or if the Web Socket connection was terminated abnormally. Declaration public event SubscriptionEndedDelegate SubscriptionEnded Event Type Type Description SubscriptionEndedDelegate WssConnectionAccepted The Ng911CadIfServer class fires this event when it accepts a Web Socket connection. This event is for testing only. The application is not expected to handle this event. Declaration public event WssConnectionAcceptedDelegate WssConnectionAccepted Event Type Type Description WssConnectionAcceptedDelegate WssConnectionEnded The Ng911CadIfServer class fires this event when a Web Socket connection has ended. This event is for testing only. The application is not expected to handle this event. Declaration public event WssConectionEndedDelegate WssConnectionEnded Event Type Type Description WssConectionEndedDelegate WssMessageReceived The Ng911CadIfServer class fires this event when it receives an EIDO conveyance protocol message. This event is for testing only. The application is not expected to handle this event. Declaration public event WssMessageReceivedDelegate WssMessageReceived Event Type Type Description WssMessageReceivedDelegate WssMessageSent The Ng911CadIfServer class fires this event when it sends an EIDO conveyance protocol message. This event is for testing only. The application is not expected to handle this event. Declaration public event WssMessageSentDelegate WssMessageSent Event Type Type Description WssMessageSentDelegate"
  },
  "api/Ng911CadIfLib.SubscriptionEndedDelegate.html": {
    "href": "api/Ng911CadIfLib.SubscriptionEndedDelegate.html",
    "title": "Delegate SubscriptionEndedDelegate",
    "keywords": "Delegate SubscriptionEndedDelegate Delegate for the SubscriptionEnded event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void SubscriptionEndedDelegate(string strSubscriptionId, string strIdType, string strId, IPEndPoint RemIpe, string strReason); Parameters Type Name Description System.String strSubscriptionId Subscription ID of the new subscription. System.String strIdType Identifies the type of functional element that subscribed to receive EIDO notification events. This information is from the idType field of the other name field of the SubjectAltName of the client X.509 certificate that was issued by the PSAP Credentialing Agency (PSAP). Will be null if the subscriber did not provide a client certificate. System.String strId ID of the subscriber from the X.509 certificate. Will be null if the subscriber did not provide a client certificate System.Net.IPEndPoint RemIpe IP endpoint of the subscriber. The IPEndpoint contains the IP address and port number of the subscriber. System.String strReason Indicates the reason that the subscription was terminated. For example: “Unsubscribed”, “Expired” or “Disconnected”."
  },
  "api/Ng911CadIfLib.WssConectionEndedDelegate.html": {
    "href": "api/Ng911CadIfLib.WssConectionEndedDelegate.html",
    "title": "Delegate WssConectionEndedDelegate",
    "keywords": "Delegate WssConectionEndedDelegate Delegate for the WssConnectionEnded event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void WssConectionEndedDelegate(IPEndPoint RemIpe); Parameters Type Name Description System.Net.IPEndPoint RemIpe Endpoint of the client."
  },
  "api/Ng911CadIfLib.WssConnectionAcceptedDelegate.html": {
    "href": "api/Ng911CadIfLib.WssConnectionAcceptedDelegate.html",
    "title": "Delegate WssConnectionAcceptedDelegate",
    "keywords": "Delegate WssConnectionAcceptedDelegate Delegate for the WssConnectionAccepted event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void WssConnectionAcceptedDelegate(IPEndPoint RemIpe, string SubProtocol, X509Certificate2 ClientCertificate); Parameters Type Name Description System.Net.IPEndPoint RemIpe Endpoint of the client that requested the connection. System.String SubProtocol Web Socket sub-protocol. May be null if not provided by the client. System.Security.Cryptography.X509Certificates.X509Certificate2 ClientCertificate The client’s X.509 certificate. May be null if the client did not provide a certificate."
  },
  "api/Ng911CadIfLib.WssMessageReceivedDelegate.html": {
    "href": "api/Ng911CadIfLib.WssMessageReceivedDelegate.html",
    "title": "Delegate WssMessageReceivedDelegate",
    "keywords": "Delegate WssMessageReceivedDelegate Delegate for the WssMessageReceived event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void WssMessageReceivedDelegate(IPEndPoint RemIpe, string JsonString); Parameters Type Name Description System.Net.IPEndPoint RemIpe Endpoint of the client System.String JsonString JSON message that was received."
  },
  "api/Ng911CadIfLib.WssMessageSentDelegate.html": {
    "href": "api/Ng911CadIfLib.WssMessageSentDelegate.html",
    "title": "Delegate WssMessageSentDelegate",
    "keywords": "Delegate WssMessageSentDelegate Delegate for the WssMessageSent event of the Ng911CadIfServer class. Namespace : Ng911CadIfLib Assembly : Ng911CadIfLib.dll Syntax public delegate void WssMessageSentDelegate(IPEndPoint RemIpe, string JsonString); Parameters Type Name Description System.Net.IPEndPoint RemIpe Endpoint of the client System.String JsonString JSON message that was received."
  },
  "articles/intro.html": {
    "href": "articles/intro.html",
    "title": "Using the NG911CadIfLib Class Library",
    "keywords": "Using the NG911CadIfLib Class Library The Ng911CadIfServer class performs the following roles. Implements the NENA EIDO Conveyance Protocol defined in NENA-STA-024.1a-2023 . This protocol uses Web Sockets as the transport layer. Manages EIDO subscriptions from multiple CAD systems or PSAP CHFEs from external agencies that wish to receive EIDOs Provides the EIDO Retrieval Service specified in NENA-STA-024-1a-2023. See the EIDO Retrieval Service . Notifies the application when a new subscription request is received or a subscription is terminated Provides an interface to one ore more NG9-1-1 Event Loggers and logs subscribe/notify and EIDO delivery events. See NG9-1-1 Event Logging An application that uses the Ng911CadIfServer class is reponsible for the following. Create an EIDO when an NG9-1-1 call is received Send the EIDO to all subscribed CAD or remote agencies using an API call to the Ng911CadIfServer class Store the EIDOs for all active incidents/calls Send all EIDOs for active incidents when a new subscription request is received Respond to events exposed by the Ng911CadIfServer class Authenticate clients when they connect to the Ng911CadIfServer object. See Mutual Authentication . Project Preparation Follow the instructions in this section to add the Ng911CadIfLib class library to a PSAP CHFE project. Add the following framework reference to the application's *.csproj file if it is not already included. <ItemGroup> <FrameworkReference Include=\"Microsoft.AspNetCore.App\" /> </ItemGroup> Add the following NuGet packages to the application. Ng911CadIfLib Ng911Lib EidoLib NewtonSoft.Json The Ng911Lib NuGet package is a class library that contains classes for all of the JSON and XML schemas used in NG9-1-1 applications, except for the Emergency Incident Data Object (EIDO). The EidoLib NuGet package is a class library that contains classes for all of the JSON schemas used for an EIDO. This includes all of the NIEM type definitions. Getting Started Perform the following steps to use the Ng911CadIfServer class. Create an instance of the Ng911CadIfServer class and pass the configuration parameters in the constructor. Hook the desired events of the Ng911CadIfServer class. Call the Start() method of the Ng911CadIfServer class. When the application shuts down, it should call the Shutdown() method of the Ng911CadIfServer object. This method performs an orderly shutdown by terminating the subscription of any subscribed CAD system elements and performing a normal close for the Web Socket connections. Ng911CadIfServer Events The Ng911CadIfServer class provides two events that an application can hook. The NewSubscription Event The Ng911CadIfServer class fires this event when it accepts a new subscription. The application must hook this event and respond to it. The delegate type for the handler of this event is NewSubscriptionDelegate . The event handler for this event must call the SendEidosToSubscriber() method of the Ng911CadIfServer class with the subscribtion ID provided to the application in the event handler and a list of EIDOs for active incidents. The application does not need to call the SendEidosToSubscriber() method if there are no active incidents. The purpose of this event and the SendEidosToSubscriber() method is to meet the requirement specified in NENA-STA-024.1a-2023 that an EIDO notifier (i.e. the PSAP CHFE) send EIDOs for all currently active incidents to a new subscriber. The Ng911CadIfServer class manages subscription state so it is not necessary for the application to manage the state of the subscription identified by the NewSubscription event. The SubscriptionEnded Event The Ng911CadIfServer class fires this event when it detects that a subscription has ended. A subscription will end when one of the following events occur. The subscriber ended the subscription by sending an unsubscribe message to the server The subscription expired The subscriber closed its end of the Web Socket connection to the server The subscriber failed to respond to a event notify message from the server three times in succession This event is for information purposes only. The application need not perform any action in response to it. Sending EIDOs The PSAP CHFE application can send an EIDO to all subscribers by calling the SendEido() method of the Ng911CadIfServer class. The SendEido() method takes an EidoType object as a parameter. The Ng911CadIfServer object will send the EIDO to each subscriber individually and wait (in a separate thread) for a response from the subscriber. This means that the SendEido() method does not block. If a subscriber is subscribed to a single incident ID, then the SendEido() method will send the EIDO to that subscriber only if the incident ID in the EIDO matches the incident ID that the subscriber subscribed to. The PSAP CHFE system should send updated EIDO objects to the Ng911CadIfServer object when the following events occur. Updated call location information is received Updated additional call related data is received The call taker adds information to the call such as call taker notes or the call taker changes the incident type information The call taker creates a conference, adds a party to the conference or transfers the call The call is terminated When a the Ng911CadIfServer accepts a new subscription request, it fires the NewSubscription event. The NewSubscription event handler has a string parameter called strSubscriptionId. In the event hanlder for the NewSubscription event, the PSAP CHFE can send the EIDOs for all active incidents/calls by calling the SendEidosToSubscriber() method of the Ng911CadIfServer class. The SendEidosToSubscriber() method takes the subscription ID and a list of EIDO objects. The EIDO Retrieval Service The EIDO Retrieval Service is an HTTPS/ReSTful interface that an external agency can use to request the EIDO for a specific incident. The need for this interface arises when the PSAP CHFE application transfers a NG9-1-1 call to the external agency. To use the EIDO retrieval service of the Ng911CadIfServer, the application configures the HTTPS base request path that the Ng911CadIfServer will listen on in the constructor of the Ng911CadIfServer object. For example: \"/incidents/eido\". When the PSAP CPE application transfers a call to another agency's PSAP CHFE or invites that agency to a conference, it must construct an HTTPS URI that points to the EIDO retrieval service interface of the Ng911CadIfServer object. The request URI contains the host address of the Ng911CadIfServer object, the base request path plus a reference ID that identifies the EIDO as the last path element. For example: https://192.168.1.12:10000/incidents/eido/12345 . In this example, the reference ID is \"12345\". The URI for the incident's EIDO gets included in the SIP INVITE request that gets sent to the external agency's PSAP CHFE. Section 4.7.4 of NENA-STA-010.3b-2021 describes how this happens. When the external agency's PSAP CHFE performs an HTTPS GET to the EIDO retrieval service interface of the Ng911CadIfServer object, the Ng911CadIfServer extracts the EIDO reference ID from the last path element of the request path and calls the EidoRetrievalCallbackDelegate that the application provided in its constructor. The application then uses the reference ID parameter to get the EidoType object and return it to the Ng911CadIfServer object. The Ng911CadIfServer object then returns the EIDO in its response to the HTTPS GET request. When the external agency's PSAP CHFE receives the EIDO, it extracts the incident ID and it may subscribe to receive updates of the EIDO for that single incident. NG9-1-1 Event Logging The Ng911CadIfServer class can support logging for NG9-1-1 Log Events. The application must perform the following steps to use this capability. Create and configure an I3LogEventClientMgr object Create an CadIfLoggingSettings object Pass the I3LogEventClientMgr and the CadIfLoggingSettings objects in the constructor of the Ng911CadIfServer class. See NG9-1-1 Event Logging . If the application already uses the I3LogEventClientMgr class for logging NG9-1-1 events, then it can use that object in the constructor of the Ng911CadIfServer class. Events That Are Logged The Ng911CadIfServer class logs the following events defined in NENA-STA-024.1a-2023. EidoLogEvent EidoTransmissionErrorLogEvent SubscriptionRequestedLogEvent SubscriptionRequestedResponseLogEvent SubscriptionTerminatedLogEvent SubscriptionTerminatedResponseLogEvent WebSocketEstablishedLogEvent WebSocketTerminatedLogEvent Mutual Authentication The Ng911CadIfServer has the ability to perform Ng9-1-1 mutual authentication of clients. One of the parameters of the constructor of the Ng911CadIfServer class is a callback delegate called MutualAuthCallback. The delegate type for this parameter is MutualAuthenticationDelegate . The MutualAuthenticationDelegate type takes the following three parameters and returns a bool value. X509Certificate2 certificate X509Chain chain SslPolicyErrors errors If the application provides a MutualAuthenticationDelegate in the constructor of the Ng911CadIfServer class, then the client must provide an X509 certificate in the HTTPS connection request. The Ng911CadIfServer class will call the application provided callback function when a client attempts to connect to either the Web Sockets interface or the EIDO Retrieval Service interface. The application provided callback can return true to accept the HTTPS connection request or false to deny the connection request. If the application does not provide a MutualAuthenticationDelegate parameter (i.e., the MutualAuthCallback constructor parameter is null) then the Ng911CadIfServer class will accept all HTTPS connection requests, regardless of whether the client provides a X.509 certificate in the connection request. The application can use the information in the certificate, chain and errors parameters of its MutualAuthenticatationDelegate function to determine whether to accept or to reject the client's connection request. To perform strict client certificate validation, the application can return false if the errors parameter is not equal to SslPolicyErrors.None. If the application wishes not to be strict (for example, a valid certificate that has expired is acceptable), then it can examine the information in the certificate and chain parameters to determine what to do. If the certificate was issued by the NENA PSAP Credentialing Agency (PCA) then the application can examine the information in the Subject Alternate Name (SAN) of the certificate in order to determine what to do. The CertUtils class in the Ng911Lib class library contains a method called GetOtherNameParams() that can extract the following information from the client's X.509 certificate. ID Type (identifies the entity such as: Element, Service, Agent or Agency) ID of the entity Roles assigned to the entity Owner of the certificate assigned to the entity See Ng9-1-1 X.509 Certificates ."
  },
  "index.html": {
    "href": "index.html",
    "title": "The Ng911CadIfLib Class Library",
    "keywords": "The Ng911CadIfLib Class Library The Ng911CadIfLib is a Microsoft .NET DLL class library that NG9-1-1 PSAP Call Handling Functional Element (CHFE) applications can use to provide conveyance of EIDOs to one or more Computer Aided Dispatch (CAD) systems. The following block diagram shows the interfaces between the PSAP CHFE, the Ng911CadIfServer class and a CAD system. The PSAP CHFE application interacts with the Ng911CadIf component via API methods. The Ng911CadIfServer component uses events and asynchronous callbacks to notify the PSAP CHFE when certain events occur. The Ng911CadIfServer component implements the NENA EIDO conveyance subscribe/notify protocol specified in the NENA-STA-024.1a-2023 . This protocol uses WEB Sockets ( RFC 6455 ) as the transport mechanism for JSON messages. CAD systems communicate with the Ng911CadIfServer using the Web Socket interface defined in NENA-STA-024.1a-2020 standard. A CAD system must subscribe to the Ng911CadServer in order to receive event notification messages containing Emergency Incident Data Object (EIDO). The Emergency Incident Data Object is a JSON document that contains all of the information about a 911 call. This information includes caller location, caller identity, and additional data about the call (such as subscriber information, information about the type of telephone service, information about the service provider and other data). When the PSAP CHFE system answers a call, it creates an EIDO JSON object and sends it to the Ng911CadIfServer object via a method called SendEido(). The Ng911CadIfServer object will then send the EIDO JSON document to all subscribed CAD systems (or other functional elements). The Ng911CadIfServer class supports the EIDO Retrieval Interval service specified in NENA-STA-024.1a-2023. This interface is an HTTP ReSTfull interface that an external agency's PSAP CHFE can use to request an EIDO for an incident when an NG9-1-1 call is transferred to it. The Ng911CadIfServer class aupports an interface to one or more NG9-1-1 Event Loggers and logs events related to EIDO delivery and subscribe and notify events via the Web Sockets interface."
  },
  "LICENSE.html": {
    "href": "LICENSE.html",
    "title": "",
    "keywords": "Copyright (c) 2023 Philip Reichl Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
  },
  "README.html": {
    "href": "README.html",
    "title": "The Ng911CadIfLibDocumentation Project",
    "keywords": "The Ng911CadIfLibDocumentation Project This is the GitHub Pages documentation project for the Ng911CadIfLib class library. This is a DocFX project so DocFX must be installed on you system before you can build the documentation GitHub Pages static web site for the Ng911Lib project. To build the documentation, open a command prompt and change to the the Ng911CadIfLibDocumentation directory and then type docfx. ** Note: The docfx.json configuration file uses a relative path to the Ng911CadIfLib project so the Ng911CadIfLibDocumentation project must be located at the same directory level as the Ng911CadIfLib project. For example, if the Ng911CadIfLib project is located under c:\\MyProjects, then the Ng911CadIfLibDocumentation project must also be located under c:\\MyProjects.** The documentation web site on github.io is setup to deploy the static web site when this project is pushed to GitHub. The documentation pages are located at https://phrsite.github.io/Ng911CadIfLibDocumentation ."
  }
}